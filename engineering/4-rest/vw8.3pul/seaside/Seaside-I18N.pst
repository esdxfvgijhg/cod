<?xml version="1.0"?><st-source><!-- Name: Seaside-I18NNotice: Copyright 1999-2014 Cincom Systems, Inc.  All rights reserved.Comment: This package provides a filter for Seaside that configures the locale of the current process before running the request.Session locale information can be accessed using #locale/locale: accessors. When a locale is set on a session, the session will be set on the running process every time a request comes in to Seaside. This includes both callbacks and rendering.UsagerenderContentOn: html	html form: [ | session |		html heading level: 1; with: #HelloWorld << #I18NTest >> 'Hello World!'.		html div: [ html text: 'Current Locale: ', Locale current name ].		html select			id: 'locales';			list: (Locale availableLocales collect: [ :id | id copyUpTo: $. ]) asSet;			selected: (Locale current id asString ]);			callback: [ :value | self session locale: value ].		html submitButton text: 'Set Locale' ]The component displays a UserMessage that will get translated based on current session locale when it is converted to a string. It also shows a drop down list of available locales that the user can choose from. When the choice is submitted the callback simply sets the chosen locale on the session.DbIdentifier: bear73DbTrace: 492599DbUsername: jkottDbVersion: 3.2.0 - 1DevelopmentPrerequisites: #(#(#any 'Seaside-Namespace' '') #(#any 'Seaside-Core' '') #(#any 'Seaside-Session' ''))PackageName: Seaside-I18NParcel: #('Seaside-I18N')PrerequisiteDescriptions: #(#(#name 'Seaside-Namespace' #componentType #package) #(#name 'Seaside-Core' #componentType #package) #(#name 'Seaside-Session' #componentType #package))PrerequisiteParcels: #(#('Seaside-Namespace' '') #('Seaside-Core' '') #('Seaside-Session' ''))PrintStringCache: (3.2.0 - 1,jkott)Version: 3.2.0 - 1Date: 3:31:29 PM June 30, 2017 --><time-stamp>From VisualWorksÂ®, Pre-Release 8.3 (jun17.5) of June 30, 2017 on June 30, 2017 at 3:31:29 PM</time-stamp><do-it>(Dialog confirm: 'You are filing-in a Parcel source file!\\While this is possible it will not have\the same effect as loading the parcel.\None of the Parcel''s prerequisites will\be loaded and none of its load actions\will be performed.\\Are you sure you want to file-in?' withCRs) ifFalse: [self error: 'Parcel file-in abandoned.  Choose terminate or close.']</do-it><class><name>LocaleFilter</name><environment>Seaside</environment><super>Seaside.WARequestFilter</super><private>false</private><indexed-type>none</indexed-type><inst-vars>locale </inst-vars><class-inst-vars></class-inst-vars><imports></imports><category></category><attributes><package>Seaside-I18N</package></attributes></class><comment><class-id>Seaside.LocaleFilter</class-id><body>WALocaleFilter configures the processes locale for an incoming request if it has one.Instance Variables	locale	&lt;Symbol&gt;		standard language and culture identifier (en_US, fr_FR, pt_BR, ...)</body></comment><methods><class-id>Seaside.LocaleFilter</class-id> <category>processing</category><body package="Seaside-I18N">configureProcessLocale	| pattern |	locale ifNil: [^self].	pattern := ((locale includes: $_) or: [locale = 'C' ]) 				ifTrue: [locale] 				ifFalse: [locale , '_*'].	(Locale availableLocales detect: [:id | pattern match: id] 		ifNone: [^self])		ifNotNil: [:localeName | Locale current: (Locale named: localeName)].</body><body package="Seaside-I18N">handleFiltered: aRequestContext 		self configureProcessLocale.	super handleFiltered: aRequestContext</body></methods><methods><class-id>Seaside.LocaleFilter</class-id> <category>accessing</category><body package="Seaside-I18N">locale	^locale</body><body package="Seaside-I18N">locale: anObject	locale := anObject.	self configureProcessLocale</body></methods><methods><class-id>Seaside.WASession</class-id> <category>accessing</category><body package="Seaside-I18N">locale	"Return the currently selected Locale id."	^(self localeFilterIfAbsent: [^nil])		locale</body><body package="Seaside-I18N">locale: aLocale	"Set the current locale id."	"self session locale: #en_CA"	(self localeFilterIfAbsent: [self addFilter: LocaleFilter new])		locale: aLocale</body><body package="Seaside-I18N">localeFilterIfAbsent: absentBlock	^self filters		detect: [:each | each class == LocaleFilter]		ifNone: absentBlock</body></methods><do-it>"Imported Classes:"</do-it><do-it>self error: 'Attempting to file-in parcel imports.  Choose terminate or close'</do-it><class><name>WASession</name><environment>Seaside</environment><super>Seaside.WARequestHandler</super><private>false</private><indexed-type>none</indexed-type><inst-vars>continuations properties documentHandlers key </inst-vars><class-inst-vars></class-inst-vars><imports></imports><category>Seaside-Session</category><attributes><package>Seaside-Session</package></attributes></class><class><name>WARequestFilter</name><environment>Seaside</environment><super>Seaside.WAObject</super><private>false</private><indexed-type>none</indexed-type><inst-vars>next </inst-vars><class-inst-vars></class-inst-vars><imports></imports><category>Seaside-Core-Filter</category><attributes><package>Seaside-Core</package></attributes></class></st-source>