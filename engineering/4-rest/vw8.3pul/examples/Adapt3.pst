<?xml version="1.0"?><st-source><!-- Name: Adapt3-ExampleNotice: Copyright 2001-2014 Cincom Systems, Inc.  All rights reserved.Comment: This parcel/package contains Adaptor3Example class, an example of using BufferedValueModels to synchronize updates with its domain model, Customer1Example.DbIdentifier: bear73DbTrace: 427914DbUsername: smichaelDbVersion: 8.0 - 1DevelopmentPrerequisites: #(#(#any 'Cust1-Example' ''))PackageName: Adapt3-ExampleParcel: #('Adapt3-Example')ParcelName: Adapt3-ExamplePrerequisiteParcels: #(#('Cust1-Example' ''))PrintStringCache: (8.0 - 1,smichael)Version: 8.0 - 1Date: 5:06:41 PM May 26, 2017 --><time-stamp>From VisualWorksÂ®, Pre-Release 8.3 (may17.4) of May 26, 2017 on May 26, 2017 at 5:06:41 PM</time-stamp><do-it>(Dialog confirm: 'You are filing-in a Parcel source file!\\While this is possible it will not have\the same effect as loading the parcel.\None of the Parcel''s prerequisites will\be loaded and none of its load actions\will be performed.\\Are you sure you want to file-in?' withCRs) ifFalse: [self error: 'Parcel file-in abandoned.  Choose terminate or close.']</do-it><class><name>Adaptor3Example</name><environment>Examples</environment><super>UI.ApplicationModel</super><private>false</private><indexed-type>none</indexed-type><inst-vars>customers selectedCustomer updateTrigger </inst-vars><class-inst-vars></class-inst-vars><imports></imports><category>Examples-Help</category><attributes><package>Adapt3-Example</package></attributes></class><comment><class-id>Examples.Adaptor3Example</class-id><body>Adaptor3Example class demonstrates the use of a BufferedValueHolder to synchronize updates between the application model and its domain model, Customer1Example.  AspectAdaptors are used to coordinate the application model aspecs and the domain model instance variables.  A trigger event is used to signal the update.Instance Variables:	customers	&lt;SelectionInList&gt;	list model of customers	selectedCustomer	&lt;ValueHolder on: Customer1Example&gt;	current customer model	updateTrigger	&lt;ValueHolder on: Boolean&gt;	 model to update customer on true</body></comment><methods><class-id>Examples.Adaptor3Example</class-id> <category>actions</category><body package="Adapt3-Example">accept	self updateTrigger value: true.	self redisplayList.</body><body package="Adapt3-Example">add	| list selectionInList |	selectionInList := self customers.	list := selectionInList list.	"Add new customer."	list add: Customer1Example new.	"Highlight new customer."	selectionInList selectionIndex: list size.</body></methods><methods><class-id>Examples.Adaptor3Example</class-id> <category>aspects</category><body package="Adapt3-Example">accountID	| adaptor bufferedAdaptor |	adaptor := AspectAdaptor subjectChannel: self selectedCustomer.	adaptor forAspect: #accountID.	bufferedAdaptor := BufferedValueHolder		subject: adaptor		triggerChannel: self updateTrigger.	^bufferedAdaptor</body><body package="Adapt3-Example">address	| adaptor bufferedAdaptor |	adaptor := AspectAdaptor subjectChannel: self selectedCustomer.	adaptor forAspect: #address.	bufferedAdaptor := BufferedValueHolder		subject: adaptor		triggerChannel: self updateTrigger.	^bufferedAdaptor</body><body package="Adapt3-Example">customers	^customers</body><body package="Adapt3-Example">name	| adaptor bufferedAdaptor |	adaptor := AspectAdaptor subjectChannel: self selectedCustomer.	adaptor forAspect: #name.	bufferedAdaptor := BufferedValueHolder		subject: adaptor		triggerChannel: self updateTrigger.	^bufferedAdaptor</body><body package="Adapt3-Example">phoneNumber	| adaptor bufferedAdaptor |	adaptor := AspectAdaptor subjectChannel: self selectedCustomer.	adaptor forAspect: #phoneNumber.	bufferedAdaptor := BufferedValueHolder		subject: adaptor		triggerChannel: self updateTrigger.	^bufferedAdaptor</body><body package="Adapt3-Example">selectedCustomer	^selectedCustomer</body><body package="Adapt3-Example">updateTrigger	^updateTrigger</body></methods><methods><class-id>Examples.Adaptor3Example</class-id> <category>initialize-release</category><body package="Adapt3-Example">initialize	customers := SelectionInList new.	customers selectionIndexHolder onChangeSend: #changedCustomer to: self.	selectedCustomer := Customer1Example new asValue.	updateTrigger := false asValue.</body></methods><methods><class-id>Examples.Adaptor3Example</class-id> <category>private</category><body package="Adapt3-Example">redisplayList	(self builder componentAt: #customers) widget invalidate.</body></methods><methods><class-id>Examples.Adaptor3Example</class-id> <category>change messages</category><body package="Adapt3-Example">changedCustomer	| chosenCustomer |	chosenCustomer := self customers selection.	self selectedCustomer value: 		(chosenCustomer isNil			ifTrue: [Customer1Example new]			ifFalse: [chosenCustomer]).	"Discard changes that were not OK'd."	self updateTrigger value: false.	"Enable/disable selection-sensitive widgets."	#( #accountID #name #address #phoneNumber #ok)		do: [ :componentName |			(self builder componentAt: componentName)				isEnabled: chosenCustomer notNil].</body></methods><methods><class-id>Examples.Adaptor3Example class</class-id> <category>interface specs</category><body package="Adapt3-Example">windowSpec	"UIPainter new openOnClass: self andSelector: #windowSpec"	&lt;resource: #canvas&gt;	^#(#FullSpec 		#window: 		#(#WindowSpec 			#label: 'Adaptor3Example' 			#min: #(#Point 506 201 ) 			#max: #(#Point 506 201 ) 			#bounds: #(#Rectangle 601 545 1107 746 ) ) 		#component: 		#(#SpecCollection 			#collection: #(				#(#LabelSpec 					#layout: #(#Point 175 19 ) 					#label: 'Customer ID' ) 				#(#LabelSpec 					#layout: #(#Point 175 56 ) 					#label: 'Name' ) 				#(#LabelSpec 					#layout: #(#Point 175 93 ) 					#label: 'Address' ) 				#(#LabelSpec 					#layout: #(#Point 175 129 ) 					#label: 'Phone' ) 				#(#LabelSpec 					#layout: #(#Point 267 169 ) 					#label: 'BufferedValueHolders)' 					#style: #small ) 				#(#LabelSpec 					#layout: #(#Point 267 153 ) 					#label: '(These fields use' 					#style: #small ) 				#(#ActionButtonSpec 					#layout: #(#AlignmentOrigin 0 0.166667 4 0 0.5 0 ) 					#model: #add 					#label: 'Add customer' ) 				#(#SequenceViewSpec 					#layout: #(#LayoutFrame 10 0 40 0 0 0.333333 -10 1 ) 					#name: #customers 					#flags: 15 					#model: #customers ) 				#(#InputFieldSpec 					#layout: #(#Rectangle 286 22 333 44 ) 					#name: #accountID 					#flags: 40 					#model: #accountID 					#type: #number ) 				#(#InputFieldSpec 					#layout: #(#Rectangle 286 57 483 81 ) 					#name: #name 					#flags: 40 					#model: #name ) 				#(#InputFieldSpec 					#layout: #(#Rectangle 286 94 483 118 ) 					#name: #address 					#flags: 40 					#model: #address ) 				#(#InputFieldSpec 					#layout: #(#Rectangle 286 130 483 154 ) 					#name: #phoneNumber 					#flags: 40 					#model: #phoneNumber ) 				#(#ActionButtonSpec 					#layout: #(#Rectangle 434 161 483 191 ) 					#name: #ok 					#flags: 40 					#model: #accept 					#label: 'OK' 					#defaultable: true ) ) ) )</body></methods><do-it>"Imported Classes:"</do-it><do-it>self error: 'Attempting to file-in parcel imports.  Choose terminate or close'</do-it><class><name>ApplicationModel</name><environment>UI</environment><super>UI.Model</super><private>false</private><indexed-type>none</indexed-type><inst-vars>builder uiSession eventHandlers </inst-vars><class-inst-vars>savedWindowInformation </class-inst-vars><imports></imports><category>UIBuilder-Framework</category><attributes><package>UIBuilder-Framework</package></attributes></class></st-source>