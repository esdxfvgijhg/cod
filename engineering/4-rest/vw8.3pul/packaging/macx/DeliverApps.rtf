{\rtf1\ansi\ansicpg1252\uc1\deff0\stshfdbch0\stshfloch0\stshfhich0\stshfbi0\deflang1033\deflangfe1033{\fonttbl{\f0\froman\fcharset0\fprq2{\*\panose 02020603050405020304}Times New Roman;}
{\f4\fswiss\fcharset0\fprq2{\*\panose 000b0500000000000000}Helvetica;}{\f5\fmodern\fcharset0\fprq1{\*\panose 02070409020205020404}Courier;}{\f36\fswiss\fcharset77\fprq0{\*\panose 00000000000000000000}Helvetica-Bold;}
{\f256\froman\fcharset238\fprq2 Times New Roman CE;}{\f257\froman\fcharset204\fprq2 Times New Roman Cyr;}{\f259\froman\fcharset161\fprq2 Times New Roman Greek;}{\f260\froman\fcharset162\fprq2 Times New Roman Tur;}
{\f261\froman\fcharset177\fprq2 Times New Roman (Hebrew);}{\f262\froman\fcharset178\fprq2 Times New Roman (Arabic);}{\f263\froman\fcharset186\fprq2 Times New Roman Baltic;}{\f264\froman\fcharset163\fprq2 Times New Roman (Vietnamese);}}
{\colortbl;\red0\green0\blue0;\red0\green0\blue255;\red0\green255\blue255;\red0\green255\blue0;\red255\green0\blue255;\red255\green0\blue0;\red255\green255\blue0;\red255\green255\blue255;\red0\green0\blue128;\red0\green128\blue128;\red0\green128\blue0;
\red128\green0\blue128;\red128\green0\blue0;\red128\green128\blue0;\red128\green128\blue128;\red192\green192\blue192;\red255\green11\blue5;}{\stylesheet{\ql \li0\ri0\widctlpar\aspalpha\aspnum\faauto\adjustright\rin0\lin0\itap0 
\fs24\lang1033\langfe1033\cgrid\langnp1033\langfenp1033 \snext0 Normal;}{\*\cs10 \additive \ssemihidden Default Paragraph Font;}{\*
\ts11\tsrowd\trftsWidthB3\trpaddl108\trpaddr108\trpaddfl3\trpaddft3\trpaddfb3\trpaddfr3\trcbpat1\trcfpat1\tscellwidthfts0\tsvertalt\tsbrdrt\tsbrdrl\tsbrdrb\tsbrdrr\tsbrdrdgl\tsbrdrdgr\tsbrdrh\tsbrdrv 
\ql \li0\ri0\widctlpar\aspalpha\aspnum\faauto\adjustright\rin0\lin0\itap0 \fs20\lang1024\langfe1024\cgrid\langnp1024\langfenp1024 \snext11 \ssemihidden Normal Table;}}{\*\latentstyles\lsdstimax156\lsdlockeddef0}{\*\rsidtbl \rsid12927197}{\*\generator Micr
osoft Word 11.0.5604;}{\info{\author Mark Roberts}{\operator Mark Roberts}{\creatim\yr2016\mo4\dy26\hr10\min16}{\revtim\yr2016\mo4\dy26\hr10\min20}{\version2}{\edmins4}{\nofpages4}{\nofwords1087}{\nofchars6199}{\*\company Cincom Systems, Inc.}
{\nofcharsws7272}{\vern24689}}\paperw11900\paperh16840\margl1440\margr1440 \widowctrl\ftnbj\aenddoc\noxlattoyen\expshrtn\noultrlspc\dntblnsbdb\nospaceforul\hyphcaps0\horzdoc\dghspace120\dgvspace120\dghorigin1701\dgvorigin1984\dghshow0\dgvshow3
\jcompress\viewkind1\viewscale100\nolnhtadjtbl\rsidroot12927197 \fet0\sectd \linex0\sectdefaultcl\sftnbj {\*\pnseclvl1\pnucrm\pnstart1\pnindent720\pnhang {\pntxta .}}{\*\pnseclvl2\pnucltr\pnstart1\pnindent720\pnhang {\pntxta .}}{\*\pnseclvl3
\pndec\pnstart1\pnindent720\pnhang {\pntxta .}}{\*\pnseclvl4\pnlcltr\pnstart1\pnindent720\pnhang {\pntxta )}}{\*\pnseclvl5\pndec\pnstart1\pnindent720\pnhang {\pntxtb (}{\pntxta )}}{\*\pnseclvl6\pnlcltr\pnstart1\pnindent720\pnhang {\pntxtb (}{\pntxta )}}
{\*\pnseclvl7\pnlcrm\pnstart1\pnindent720\pnhang {\pntxtb (}{\pntxta )}}{\*\pnseclvl8\pnlcltr\pnstart1\pnindent720\pnhang {\pntxtb (}{\pntxta )}}{\*\pnseclvl9\pnlcrm\pnstart1\pnindent720\pnhang {\pntxtb (}{\pntxta )}}\pard\plain \ql \li0\ri0\nowidctlpar
\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\faauto\rin0\lin0\itap0 \fs24\lang1033\langfe1033\cgrid\langnp1033\langfenp1033 {\b\f36\fs28\ul\insrsid12927197 Deliver S}{\b\f36\fs28\ul\insrsid12927197 
tand-alone Applications with }{\b\f36\fs28\ul\insrsid12927197 OS X}{\f4\fs28\ul\insrsid12927197 
\par }{\f4\insrsid12927197 
\par VisualWorks }{\f4\insrsid12927197 8.x}{\f4\insrsid12927197  supports combining a VM and an image to form a stand-alone
\par OS X application.}{\f4\insrsid12927197  }{\f4\insrsid12927197 The following paragraphs describe how this is done.
\par 
\par }{\b\f36\insrsid12927197 1\tab Smalltalk preliminaries}{\f4\insrsid12927197 
\par 
\par When preparing a runtime image using RuntimePackager, you should
\par follow these hints:
\par 
\par  - disable command line processing
\par  - enable delivery at least for 'Operating Systems' 'Mac' and 'Unix',
\par  - at least enable support for 'UI Looks' 'Mac'
\par  - ensure that all classes of parcel GHMacOSXLookFeel are marked as
\par    classes to be kept, especially when preparing the image on a platform
\par }{\f4\insrsid12927197    other than }{\f4\insrsid12927197 OS X.
\par  - make sure that all 'Unix*' classes, and classes of parcel 'MacOSXBasic'
\par    are to be kept.
\par 
\par Test the image thoroughly on all platforms you want to deliver, before
\par performing the next step.  The image should be named 'resource.im' if used
\par }{\f4\insrsid12927197 in an }{\f4\insrsid12927197 OS X application.
\par 
\par }{\b\f36\insrsid12927197 2\tab }{\b\f36\insrsid12927197 OS X Application Packaging}{\f4\insrsid12927197 
\par 
\par OS X has its own way of combining an executable and several resources
\par to an application.  The following description is short and may not touch
\par all available features of this process, but it should give you enough
\par background to move on from there.
\par 
\par }{\b\f36\insrsid12927197 2.1\tab Some background}{\f4\insrsid12927197 
\par 
\par }{\f4\insrsid12927197 Each }{\f4\insrsid12927197 OS X application is, from a Unix point of view, a directory with a
\par certain structure.  The directory's name must have the extension '.app',
\par and the structure has to be as follows (using visual.app as an example):
\par 
\par     visual.app/ \tab \tab \tab \tab "this name only visible from a shell"
\par         Contents/
\par             PkgInfo\tab \tab \tab \tab "file containing type/creator bits as in MacOS 9"
\par             Info.plist\tab \tab \tab \tab "XML file containg all package infos of this application"
\par             MacOS/
\par                 visual\tab \tab \tab \tab "the Unix type executable"
\par             Resources/
\par                 MainIcons.icns\tab \tab "the icons for the application"
\par                 ImageIcons.icns\tab \tab "the icons for image files"
\par                 herald.tiff\tab \tab \tab "the herald screen graphics"
\par                 }{\f4\cf17\insrsid12927197 resource.im}{\f4\insrsid12927197 \tab \tab "place and name for an image bundled with the VM"
\par                 English.lproj/\tab \tab "place for language dependent resources for menus etc."
\par                     InfoPlist.strings\tab "Unicode encoded file with language dependent strings"
\par                     <other files>
\par 
\par Except for the Icon files, all files can only be replaced, but not renamed.
\par 
\par Icons are used for Finder display of files. You can modify the icons using
\par the 'IconComposer' application included in the Apple DeveloperTools distribution.
\par 
\par The splash screen graphics can be replaced with a Tiff-file with exactly this name.
\par 
\par The 'PkgInfo' file conatins just 8 characters, which, for VisualWorks }{\f4\insrsid12927197 8.x}{\f4\insrsid12927197 , are:
\par 
\par     APPLHPS7
\par 
\par For your application, the last four characters have to be replaced by your
\par creator code, which should be registered with Apple and be unique.
\par 
\par The file 'Info.plist' is in XML format, and can be edited with a normal
\par text editor, or with the }{\b\f36\insrsid12927197 PropertyListEditor}{\f4\insrsid12927197  included in the Developer Tools.  
\par Several facts about the application are collected in this
\par file, like which icon file is used for the application, what document
\par types are to be recognized, etc.  The XML structure describes a dictionary
\par which has to be adapted for each application.  The following lists the
\par most important key-value pairs, which you have to edit:
\par 
\par     CFBundleTypeExtension\tab - \tab an array of strings, VisualWorks => <string>.im</string>
\par     CFBundleTypeIconFile  \tab -\tab name of the documents icon file in the /Resource directory
\par \tab \tab \tab \tab \tab \tab \tab WITHOUT the '.icns' extension,
\par \tab \tab \tab \tab \tab \tab \tab VisualWorks => <string>ImageIcons</string>
\par     CFBundleTypeOSTypes\tab -\tab array of type descriptors of a document, (in our case for image files)
\par \tab \tab \tab \tab \tab \tab \tab VisualWorks =>
\par \tab \tab \tab \tab \tab \tab \tab \tab <array>
\par \tab \tab \tab \tab \tab \tab \tab \tab \tab <string>HPS7</string>
\par \tab \tab \tab \tab \tab \tab \tab \tab </array>
\par 
\par     CFBundleExecutable\tab \tab -\tab name of the executable in Contents/MacOS
\par \tab \tab \tab \tab \tab \tab \tab VisualWorks =>
\par \tab \tab \tab \tab \tab \tab \tab \tab <string>visual</string>
\par 
\par     CFBundleIconFile\tab \tab \tab -\tab name of the applications icon file in the
\par \tab \tab \tab \tab \tab \tab \tab /Resource directory WITHOUT the '.icns' extension, 
\par \tab \tab \tab \tab \tab \tab \tab VisualWorks =>
\par \tab \tab \tab \tab \tab \tab \tab \tab <string>MainIcons</string>
\par 
\par     CFBundleIdentifier\tab \tab  -\tab name of the entry for a preferences dictionary
\par \tab \tab \tab \tab \tab \tab \tab in the UserDefaults database
\par \tab \tab \tab \tab \tab \tab \tab VisualWorks =>
\par \tab \tab \tab \tab \tab \tab \tab \tab <string>com.cincom.vw7.0</string>
\par 
\par     CFBundleSignature\tab \tab -\tab creator type of this application
\par \tab \tab \tab \tab \tab \tab \tab VisualWorks =>
\par \tab \tab \tab \tab \tab \tab \tab \tab <string>HPS7</string>
\par \tab \tab \tab \tab \tab \tab \tab Remember to adapt this file, if you add or
\par \tab \tab \tab \tab \tab \tab \tab replace icon files with different names.
\par 
\par The last file you have to edit is the InfoPlist.strings file in each of
\par the *.lproj directories of the Resource folder.  For each language, the
\par strings in this file can be adapted.  This file is a Unicode text file,
\par and must be edited with an Unicode-aware editor, e.g. the }{\b\f36\insrsid12927197 TextEdit }{\f4\insrsid12927197 or }{\b\f36\insrsid12927197 PropertyListEditor}{\f4\insrsid12927197  }{\f4\insrsid12927197 application that comes }{\f4\insrsid12927197 with 
}{\f4\insrsid12927197 OS X (PropertyListEditor }{\f4\insrsid12927197 
\par }{\f4\insrsid12927197 included in DeveloperTools).  
\par The file's first entry initially ensures that the applications menu has only the menu item 'VisualWorks'.
\par 
\par }{\b\f36\insrsid12927197 2.2\tab How to do it}{\f4\insrsid12927197 
\par 
\par To combine a VisualWorks VM and your 'resource.im' to form a}{\f4\insrsid12927197 n }{\f4\insrsid12927197 OS X
\par application, begin by opening the Terminal application because you need
\par to execute tasks from a command line; the Finder won't work.
\par 
\par  i. Make a copy of the visual.app/ directory:
\par 
\par \tab }{\f5\insrsid12927197 user% cp -R visual.app myApp.appToBe
\par 
\par }{\f4\insrsid12927197     Remove all unnecessary UnixVMs from this copy:
\par }{\f5\insrsid12927197 
\par }{\f4\insrsid12927197 \tab }{\f5\insrsid12927197 user% rm myApp.appToBe/Contents/MacOS/vwmacxdbg
\par }{\f4\insrsid12927197 \tab }{\f5\insrsid12927197 user% rm myApp.appToBe/Contents/MacOS/vwmacxast
\par }{\f4\insrsid12927197 \tab }{\f5\insrsid12927197 user% rm myApp.appToBe/Contents/MacOS/vwmacx}{\f4\insrsid12927197 
\par 
\par  ii. Copy your image into the 'myApp.appToBe/Contents/Resource' directory:
\par 
\par         }{\f5\insrsid12927197 user% cp resource.im myApp.appToBe/Contents/Resources}{\f4\insrsid12927197 
\par 
\par  iii. Edit the file 'myApp.appToBe/Contents/PkgInfo' to make your application
\par     unique.  Enter your creator code as the last four characters of this file.
\par 
\par  iv.  Remove or change the following entries in the file 
\par      'myApp.appToBe/Contents/Info.plist'. Any occurrence of 'HPS7'
\par      should be removed from this file.
\par \tab \tab CFBundleTypeOSTypes
\par \tab \tab CFBundleSignature
\par 
\par  v.  Rename the directory\tab 'myApp.appToBe' to 'myApp.app':
\par 
\par        }{\f5\insrsid12927197  user% mv myApp.appToBe myApp.app}{\f4\insrsid12927197 
\par 
\par You can now start up your application with a double-click.  It is just
\par missing some unique Icon(s).  After you have replaced file MainIcons.icns
\par with your version, the application will show up as a unique}{\f4\insrsid12927197  }{\f4\insrsid12927197 OS X
\par application in the Finder. If you edited myApp/Contents/Info.plist, you
\par might have to logout and login again to make the Finder read your new
\par specifications.
\par 
\par Note that this version does not handle documents dropped on such
\par applications correctly.
\par 
\par }{\b\f36\insrsid12927197 3\tab Creating and using a Userprimitive VM}{\f4\insrsid12927197 
\par 
\par As on other platforms, it is perfectly possible to compile a customized VM,
\par enhanced with user defined primitives. Directory bin/macx/userprim contains
\par all necessary files. The compilation using }{\f5\insrsid12927197 make}{\f4\insrsid12927197  can only be performed from a
\par }{\b\f36\insrsid12927197 Terminal}{\f4\insrsid12927197 , as on other Unix platforms.
\par Lets assume you use the }{\f5\insrsid12927197 makefile}{\f4\insrsid12927197  unchanged, then it will compile an executable
\par called 'visualUser'. Now, this is a Unix executable, the }{\b\f36\insrsid12927197 Finder}{\f4\insrsid12927197  won't recognize it as
\par an application yet. How can you use it?
\par  i.\tab start your image from the Terminal like this:
\par \tab \tab }{\f5\insrsid12927197 user% visualUser myImage.im
\par 
\par }{\f4\insrsid12927197  ii.\tab copy 'visualUser' into your application directory 'myApp.app' (see chapter 2.2):
\par \tab \tab }{\f5\insrsid12927197 user% cp visualUser myApp.app/Contents/MacOS/visual}{\f4\insrsid12927197 
\par 
\par \tab and start your application by double-clicking.
\par 
\par 
\par Cincom / Georg Heeg May 2002}{\f4\insrsid12927197 ; Updated 04/26/2016, MDR}{\f4\insrsid12927197 
\par }}